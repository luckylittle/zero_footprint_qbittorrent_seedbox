---
# vars file for zero_footprint_qbittorrent_seedbox

# 01-common
create_folders:
  - "site"
  - "site/APPZ"
  - "site/GAMES"
  - "site/MISC"
  - "site/MOVIES"
  - "site/MUSIC"
  - "site/TV"
  - "site/UPLOAD"
  - "site/XXX"
maximum_number_of_open_file_descriptors: "262144"

# 02-qbt
qbt_latest_ver_url: "https://api.github.com/repos/userdocs/\
                    qbittorrent-nox-static/releases/latest"
qbt_nox_static_url: "https://github.com/userdocs/qbittorrent-nox-static/\
                    releases/download"
qbt_nox_asset: "x86_64-qbittorrent-nox"
qbt_url: "{{ qbt_nox_static_url }}/\
          {{ qbt_static_nox_ver.json.tag_name }}/\
          {{ qbt_nox_asset }}"
qbt_config_directory: "/home/{{ ansible_user }}/.config/qBittorrent/"
qbt_config_file: "/home/{{ ansible_user }}/.config/qBittorrent/qBittorrent.conf"
qbt_service_file: "/etc/systemd/system/qbt.service"
qbt_application_filelogger_age: "1"
qbt_application_filelogger_agetype: "1"
qbt_application_filelogger_backup: "true"
qbt_application_filelogger_deleteold: "true"
qbt_application_filelogger_enabled: "false"
qbt_application_filelogger_maxsizebytes: "66560"
qbt_application_filelogger_path: "/home/{{ ansible_user }}/\
                                .local/share/qBittorrent/logs"
qbt_application_memoryworkingsetlimit: "{{ ((ansible_memtotal_mb * 3) / 4) \
                                      | round | int }}"
qbt_autorun_enabled: "true"
qbt_autorun_program: "/usr/bin/curl -s \
  http://127.0.0.1:2468/api/webhook?apikey=\
  1234567890abcdefghijklmnopqrstuvwxyz1234567890ab \
  -d infoHash=%I -d includeSingleEpisodes=true"
qbt_bittorrent_sessionalternativeglobaldlspeedlimit: "0"
qbt_bittorrent_sessionalternativeglobalupspeedlimit: "0"
qbt_bittorrent_sessionbtprotocol: "TCP"
qbt_bittorrent_sessioncheckingmemusagesize: "1024"
qbt_bittorrent_sessiondhtenabled: "false"
qbt_bittorrent_sessiondefaultsavepath: "/home/{{ ansible_user }}/site"
qbt_bittorrent_session_disableautotmmbydefault: "false"
qbt_bittorrent_sessionexcludedfilenames: ""
qbt_bittorrent_sessionhashingthreadscount: "2"
qbt_bittorrent_sessionlsdenabled: "false"
qbt_bittorrent_sessionmaxconnections: "-1"
qbt_bittorrent_sessionmaxconnectionspertorrent: "-1"
qbt_bittorrent_sessionmaxuploads: "-1"
qbt_bittorrent_sessionmaxuploadspertorrent: "-1"
qbt_bittorrent_sessionpexenabled: "false"
qbt_bittorrent_sessionpeertos: "0"
qbt_bittorrent_sessionpreallocation: "true"
qbt_bittorrent_sessionqueueingsystemenabled: "false"
qbt_bittorrent_sessionrefreshinterval: "2000"
qbt_bittorrent_sessionsslport: "0"
qbt_bittorrent_sessionssrfmitigation: "false"
qbt_bittorrent_sessionsavestatisticsinterval: "120"
qbt_bittorrent_sessionsendbufferlowwatermark: "3072"
qbt_bittorrent_sessionsendbufferwatermark: "10240"
qbt_bittorrent_sessionsendbufferwatermarkfactor: "200"
qbt_bittorrent_sessionsocketbacklogsize: "3000"
qbt_bittorrent_sessionsuggestmode: "true"
qbt_bittorrent_sessiontags: "cross-seed, autobrr"
qbt_bittorrent_sessionvalidatehttpstrackercertificate: "false"
qbt_core_autodeleteaddedtorrentfile: "Never"
qbt_preferences_advancedignoresslerrors: "true"
qbt_preferences_connectionresolvepeercountries: "false"
qbt_preferences_generallocale: "en"
qbt_preferences_mailnotificationreq_auth: "true"
qbt_preferences_webuiauthsubnetwhitelistenabled: "true"
qbt_preferences_webuilocalhostauth: "false"
qbt_preferences_webuiport: "8080"
qbt_categories_file: "/home/{{ ansible_user }}/.config/\
                    qBittorrent/categories.json"

# 03-vsftpd
vsftpd_required_rpms:
  - "libdb-utils"
  - "python3-cryptography"
  - "vsftpd"
public_ip_checker: "http://icanhazip.com"
vsftpd_private_key_path: "/etc/ssl/private/vsftpd.key"
vsftpd_request_key_path: "/etc/ssl/private/vsftpd.csr"
vsftpd_public_key_path: "/etc/ssl/private/vsftpd.pem"
vsftpd_cert_country: "US"
vsftpd_cert_org: "ORG"
vsftpd_cert_ou: "OU"
vsftpd_cert_email: "none@none.none"
vsftpd_config_file: "/etc/vsftpd/vsftpd.conf"
vsftpd_pam_config_file: "/etc/pam.d/vsftpd"
vsftpd_max_clients: "8"
vsftpd_max_per_ip: "8"
vsftpd_pasv_enable: "YES"
vsftpd_port_enable: "YES"
vsftpd_pasv_addr_resolve: "NO"
vsftpd_reverse_lookup_enable: "NO"
vsftpd_anonymous_enable: "NO"
vsftpd_local_enable: "YES"
vsftpd_write_enable: "YES"
vsftpd_local_umask: "000"
vsftpd_file_open_mode: "0777"
vsftpd_dirmessage_enable: "NO"
vsftpd_xferlog_enable: "NO"
vsftpd_xferlog_std_format: "NO"
vsftpd_log_ftp_protocol: "YES"
vsftpd_dual_log_enable: "YES"
vsftpd_xferlog_file: "/dev/null"
vsftpd_vsftpd_log_file: "/dev/null"
vsftpd_syslog_enable: "YES"
vsftpd_idle_session_timeout: "60"
vsftpd_data_connection_timeout: "120"
vsftpd_chroot_local_user: "YES"
vsftpd_allow_writeable_chroot: "YES"
vsftpd_listen: "YES"
vsftpd_listen_ipv6: "NO"
vsftpd_pam_service_name: "vsftpd"
vsftpd_userlist_enable: "YES"
vsftpd_ssl_enable: "YES"
vsftpd_debug_ssl: "NO"
vsftpd_force_local_data_ssl: "YES"
vsftpd_force_local_logins_ssl: "YES"
vsftpd_ssl_tlsv1_2: "YES"
vsftpd_ssl_tlsv1: "NO"
vsftpd_ssl_sslv2: "NO"
vsftpd_ssl_sslv3: "NO"
vsftpd_require_ssl_reuse: "NO"
vsftpd_ssl_ciphers: "MEDIUM"

# 04-tools
tools_repos_to_check:
  - "autobrr/autobrr"
  - "autobrr/mkbrr"
  - "autobrr/tqm"
  - "autobrr/netronome"
  - "nvm-sh/nvm"
  - "s0up4200/sizechecker"
autobrr_ver: "{{ tools_versions['autobrr/autobrr'] }}"
mkbrr_ver: "{{ tools_versions['autobrr/mkbrr'] }}"
netronome_ver: "{{ tools_versions['autobrr/netronome'] }}"
tqm_ver: "{{ tools_versions['autobrr/tqm'] }}"
nvm_ver: "{{ tools_versions['nvm-sh/nvm'] }}"
sizechecker_ver: "{{ tools_versions['s0up4200/sizechecker'] }}"
cross_seed: true
autobrr_service_file: "/etc/systemd/system/autobrr@.service"
autobrr_cfg_file: "/home/{{ ansible_user }}/.config/autobrr/config.toml"
autobrr_cfg_host: "0.0.0.0"
autobrr_cfg_port: "7474"
autobrr_cfg_baseurl: "/autobrr/"
autobrr_cfg_baseurlmodelegacy: "true"
autobrr_cfg_loglevel: "ERROR"
autobrr_cfg_checkforupdates: "false"
autobrr_cfg_customdefinitions: "/home/{{ ansible_user }}/.config/\
                              autobrr/definitions"
autobrr_url: "https://github.com/autobrr/autobrr/releases/download"
sizechecker_url: "https://github.com/s0up4200/sizechecker/releases/download"
mkbrr_url: "https://github.com/autobrr/mkbrr/releases/download"
netronome_url: "https://github.com/autobrr/netronome/releases/download"
tqm_url: "https://github.com/autobrr/tqm/releases/download"
autobrr_src: "{{ autobrr_url }}/{{ autobrr_ver }}/\
              autobrr_{{ autobrr_ver | regex_replace('^v', '') \
              }}_linux_x86_64.tar.gz"
sizechecker_src: "{{ sizechecker_url }}/{{ sizechecker_ver }}/\
                  sizechecker_{{ sizechecker_ver | regex_replace('^v', '') \
                  }}_linux_amd64.tar.gz"
mkbrr_src: "{{ mkbrr_url }}/{{ mkbrr_ver }}/\
            mkbrr_{{ mkbrr_ver | regex_replace('^v', '') }}_linux_x86_64.tar.gz"
netronome_src: "{{ netronome_url }}/{{ netronome_ver }}/\
                netronome_{{ netronome_ver | regex_replace('^v', '') \
                }}_linux_x86_64.tar.gz"
tqm_src: "{{ tqm_url }}/{{ tqm_ver }}/tqm_{{ tqm_ver | regex_replace('^v', '') \
          }}_linux_amd64.tar.gz"
tqm_cfg_file: "/home/{{ ansible_user }}/.config/tqm/config.yaml"
upgrade_autobrr_file: "/home/{{ ansible_user }}/upgrade_autobrr.sh"
panic_file: "/usr/local/bin/panic.sh"
benchmark_file: "/usr/local/bin/bench.sh"
node_ver: "22.17.0"
temporary_nvm_install_script_file: "/tmp/install-nvm.sh"
cross_seed_port: "2468"
cross_seed_cfg_file: "/home/{{ ansible_user }}/.cross-seed/config.js"
cross_seed_start_file: "/usr/local/bin/start-cross-seed.sh"
cross_seed_service_file: "/etc/systemd/system/cross-seed.service"
cross_seed_api_key: "1234567890abcdefghijklmnopqrstuvwxyz1234567890ab"
tools_required_rpms:
  - "{{ vnstat_dl }}"
  - "traceroute"
  - "wget"
netronome_cfg_port: "7575"
netronome_cfg_file: "/home/{{ ansible_user }}/.config/netronome/config.toml"
netronome_agent_cfg_port: "8200"
netronome_agent_cfg_file: "/home/{{ ansible_user }}/.config/netronome/agent.toml"
netronome_service_file: "/etc/systemd/system/netronome@.service"
netronome_agent_service_file: "/etc/systemd/system/netronome-agent.service"
vnstat_dl: "https://kojipkgs.fedoraproject.org//packages/vnstat/\
            2.9/2.el9/x86_64/vnstat-2.9-2.el9.x86_64.rpm"

# 05-security
ssh_port: "22"
security_required_rpms:
  - "firewalld"
sshd_cfg_file: "/etc/ssh/sshd_config"
restricted_sudo_commands:
  - "/bin/cat"
  - "/usr/bin/dnf"
  - "/usr/bin/mv"
  - "/usr/bin/python3"
  - "/usr/bin/systemctl"
  - "/usr/bin/vi"
  - "/usr/bin/vim"
  - "/usr/sbin/reboot"
  - "/usr/sbin/restorecon"
  - "/usr/sbin/shutdown"

# 06-cleanup
cleanup_junk_rpms:
  - "audit"
  - "insights-client"
  - "langpacks-*"
  - "make"
  - "python3-cryptography"
  - "rsyslog"
common_tools_homefolder_junk:
  - ".lesshst"
  - ".wget-hsts"
  - "autobrr_{{ autobrr_ver }}_linux_x86_64.tar.gz"
  - "autobrr"
  - "autobrrctl"
  - "LICENSE.md"
  - "LICENSE"
  - "mkbrr"
  - "netronome"
  - "README.md"
  - "sizechecker_{{ sizechecker_ver }}_linux_amd64.tar.gz"
  - "sizechecker"
  - "tqm"
journald_config_file: "/etc/systemd/journald.conf"
rhsm_config_file: "/etc/rhsm/rhsm.conf"
dnf_config_file: "/etc/dnf/dnf.conf"
centos_logs:
  - "/var/log/btmp"
  - "/var/log/dnf.librepo.log"
  - "/var/log/dnf.log"
  - "/var/log/dnf.rpm.log"
  - "/var/log/firewalld"
  - "/var/log/hawkey.log"
  - "/var/log/lastlog"
  - "/var/log/sssd/sssd_kcm.log"
  - "/var/log/tallylog"
  - "/var/log/wtmp"
rhel_logs: "{{ centos_logs + \
            ['/var/log/rhsm/rhsm.log', \
            '/var/log/rhsm/rhsmcertd.log', \
            '/var/log/tuned/tuned.log'] }}"
cleanup_junk_services:
  - "dnf-makecache.timer"

# 07-reboot
required_services:
  - "{{ autobrr_service }}"
  - "{{ netronome_service }}"
  - "cross-seed"
  - "fstrim.timer"
  - "netronome-agent"
  - "qbt"
  - "tuned"
  - "vnstat"
  - "vsftpd"
reboot_timeout: 1200

# 08-smoke_tests
test_timeout: 15
